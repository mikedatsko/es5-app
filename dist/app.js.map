{"version":3,"sources":["app.js"],"names":["Data","this","create","key","data","prompt","console","error","localStorage","setItem","read","getItem","update","delete","removeItem","Events","Markup","getId","id","i","Math","floor","random","AddTodo","self","row","markup","className","parent","cell","form","tag","attrs","action","method","inputGroup","addField","type","placeholder","buttonGroup","addButton","content","events","on","event","preventDefault","add","subscribe","details","detail","todo","edit","ListTodos","todos","JSON","stringify","getList","App","window","postMessage","URL","document","location","href","searchParams","get","push","text","checked","listTodos","prototype","element","eventName","callback","addEventListener","send","CustomEvent","dispatchEvent","deleteEvent","removeEventListener","options","optionsDefault","undefined","hasOwnProperty","createElement","value","innerHTML","length","forEach","attr","name","prnt","querySelector","appendChild","body","query","find","remove","querySelectorAll","parse","index","reset","addTodo","todosEl","getElementById","todosBodyEl","todoEl","todoCellCheckboxEl","width","todoCellTextEl","todoCellActionsEl","todoCheckboxEl","todoActionEditEl","todoActionDeleteEl","doCheck","splice","app"],"mappings":"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","file":"app.js","sourcesContent":["function Data() {\n  this.create = function(key, data) {\n    key = key || prompt('Key:');\n    data = data || prompt('Data:');\n\n    if (typeof key === 'undefined') {\n      console.error('No key');\n      return false;\n    }\n\n    if (typeof data === 'undefined') {\n      console.error('No data');\n      return false;\n    }\n\n    localStorage.setItem(key, data);\n  }\n\n  this.read = function(key) {\n    if (typeof key === 'undefined') {\n      console.error('No data');\n      return false;\n    }\n\n    var data = localStorage.getItem(key);\n\n    if (!data) {\n      console.error('No data');\n      return false;\n    }\n\n    return data;\n  }\n\n  this.update = function(key, data) {\n    key = key || prompt('Key:');\n    data = data || prompt('Data:');\n\n    if (typeof key === 'undefined') {\n      console.error('No key');\n      return false;\n    }\n\n    if (typeof data === 'undefined') {\n      console.error('No data');\n      return false;\n    }\n\n    if (!localStorage.getItem(key)) {\n      console.error('No data found');\n      return false;\n    }\n\n    localStorage.setItem(key, data);\n  }\n\n  this.delete = function(key) {\n    key = key || prompt('Key:');\n\n    if (typeof key === 'undefined') {\n      console.error('No key');\n      return false;\n    }\n\n    if (!localStorage.getItem(key)) {\n      console.error('No data found');\n      return false;\n    }\n\n    localStorage.removeItem(key);\n  }\n}\n\nvar data = new Data();\n\nfunction Events() {\n  \n}\n\nEvents.prototype.on = function(element, eventName, callback) {\n  element.addEventListener(eventName, callback, false);\n};\n\nEvents.prototype.subscribe = function(eventName, callback) {\n  document.addEventListener(eventName, callback, false);\n};\n\nEvents.prototype.send = function(eventName, details) {\n  details = details || {};\n\n  var event = new CustomEvent(eventName, {\n    detail: details\n  });\n\n  document.dispatchEvent(event);\n};\n\nEvents.prototype.deleteEvent = function() {\n  document.removeEventListener(eventName, callback, false);\n};\n\nvar events = new Events();\n\nfunction Markup() {\n  \n}\n\nMarkup.prototype.create = function(options) {\n  // tag\n  // content\n  // parent\n  // className\n  // id\n  // callback\n\n  var optionsDefault = {\n    tag: 'div',\n    content: '',\n    parent: 'body',\n    className: '',\n    id: '',\n    callback: undefined,\n    attrs: []\n  };\n\n  options = options || {};\n\n  for(var i in optionsDefault) {\n    if (!options.hasOwnProperty(i)) {\n      options[i] = optionsDefault[i];\n    }\n  }\n\n  var element;\n\n  if (options.tag === 'input#checkbox') {\n    element = document.createElement('input');\n    element.type = 'checkbox';\n    element.value = 1;\n  } else {\n    element = document.createElement(options.tag);\n  }\n\n  element.innerHTML = options.content;\n\n  if (options.className) {\n    element.className += options.className;\n  }\n\n  if (options.id) {\n    element.id = options.id;\n  }\n\n  if (options.tag === 'form') {\n    element.action = 'javascript:void(0)';\n    element.method = 'post';\n  }\n\n  if (options.attrs.length) {\n    options.attrs.forEach(function(attr) {\n      for (var name in attr) {\n        switch (name) {\n          default:\n            element[name] = attr[name];\n            break;\n        }\n      }\n    });\n  }\n\n  if (options.parent) {\n    var prnt = typeof options.parent === 'string'\n      ? document.querySelector(options.parent)\n      : options.parent;\n\n    if (!prnt) {\n      console.error('No element found');\n      return false;\n    }\n    prnt.appendChild(element);\n  } else {\n    document.body.appendChild(element);\n  }\n  return element;\n};\n\nMarkup.prototype.update = function(query, content) {\n  var elements = this.find(query);\n  elements[0].innerHTML = content;\n};\n\nMarkup.prototype.delete = function(query) {\n  var elements = this.find(query);\n  elements[0].remove();\n};\n\nMarkup.prototype.find = function(query) {\n  var elements = document.querySelectorAll(query);\n  return elements;\n};\n\nvar markup = new Markup();\n\nfunction getId() {\n  var letters = 'abcdefghijklmnopqrstuvwxyz';\n  var id = '';\n\n  for (var i = 0; i < 6; i++ ) {\n    id += letters[Math.floor(Math.random() * 26)];\n  }\n  return id;\n}\n\n\nfunction AddTodo() {\n  var self = this;\n  var row = markup.create({\n    className: 'row',\n    parent: '#todo_add'\n  });\n\n  var cell = markup.create({\n    className: 'col-lg-12',\n    parent: row\n  });\n  \n  var form = markup.create({\n    tag: 'form',\n    attrs: [\n      { action: 'javascript:void(0)' },\n      { method: 'POST' }\n    ],\n    parent: cell\n  });\n  \n  var inputGroup = markup.create({\n    className: 'input-group',\n    parent: form\n  });\n\n  var addField = markup.create({\n    tag: 'input',\n    attrs: [\n      { type: 'text' },\n      { placeholder: 'Todo text...' }\n    ],\n    className: 'form-control',\n    parent: inputGroup\n  });\n\n  var buttonGroup = markup.create({\n    tag: 'span',\n    className: 'input-group-btn',\n    parent: inputGroup\n  });\n\n  var addButton = markup.create({\n    tag: 'button',\n    attrs: [\n      { type: 'submit' }\n    ],\n    content: 'Add',\n    className: 'btn btn-primary',\n    parent: buttonGroup\n  });\n\n  events.on(form, 'submit', function(event) {\n    event.preventDefault();\n    self.add(form, addField, addButton);\n  });\n\n  events.subscribe('edit-todo-item', function(event) {\n    var details = event.detail;\n\n    if (!details.todo) { return }\n\n    self.edit(form, addField, addButton, details);\n  });\n}\n\nAddTodo.prototype.add = function(form, addField, addButton) {\n  var todos = data.read('todos');\n  if (!todos) {\n    todos = [];\n    data.create('todos', JSON.stringify([]));\n  } else {\n    todos = JSON.parse(todos);\n  }\n\n  if (form.type && form.type.value === 'save' && form.index) {\n    todos[+form.index.value].text = addField.value;\n    form.type.remove();\n    form.index.remove();\n  } else {\n    todos.push({\n      text: addField.value,\n      checked: false\n    });\n  }\n\n  addButton.innerHTML = 'Add';\n\n  data.update('todos', JSON.stringify(todos));\n\n  form.reset();\n\n  events.send('get-todos-list');\n};\n\nAddTodo.prototype.edit = function(form, addField, addButton, details) {\n  if (!form.type) {\n    var typeField = markup.create({\n      tag: 'input',\n      attrs: [\n        { type: 'hidden' },\n        { name: 'type' },\n        { value: 'save' }\n      ],\n      className: 'form-control',\n      parent: form\n    });\n  } else {\n    form.type.value = 'save';\n  }\n\n  if (!form.index) {\n    var indexField = markup.create({\n      tag: 'input',\n      attrs: [\n        { type: 'hidden' },\n        { name: 'index' },\n        { value: details.index }\n      ],\n      className: 'form-control',\n      parent: form\n    });\n  } else {\n    form.index.value = details.index;\n  }\n\n  addButton.innerHTML = 'Save';\n  addField.value = details.todo.text;\n};\n\nvar addTodo = new AddTodo();\n\n\nfunction ListTodos() {\n  var todos = data.read('todos');\n  if (!todos) {\n    todos = [];\n    data.update('todos', JSON.stringify(todos));\n  }\n\n  var self = this;\n\n  events.subscribe('get-todos-list', function() {\n    self.getList();\n  });\n}\n\nListTodos.prototype.getList = function() {\n  var self = this;\n  var todos = data.read('todos');\n  todos = JSON.parse(todos);\n\n  var todosEl = document.getElementById('todo_items');\n  todosEl.innerHTML = '';\n\n  var todosBodyEl = markup.create({\n    tag: 'tbody',\n    parent: todosEl\n  });\n\n  if (!todos.length) {\n    return false\n  }\n\n  todos.forEach(function(todo, index) {\n    var todoEl = markup.create({\n      tag: 'tr',\n      parent: todosBodyEl,\n      className: todo.checked ? 'success' : ''\n    });\n\n    var todoCellCheckboxEl = markup.create({\n      tag: 'td',\n      parent: todoEl,\n      attrs: [\n        { width: '30' }\n      ]\n    });\n\n    var todoCellTextEl = markup.create({\n      tag: 'td',\n      parent: todoEl,\n      content: todo.text,\n      className: todo.checked ? 'checked' : ''\n    });\n\n    var todoCellActionsEl = markup.create({\n      tag: 'td',\n      parent: todoEl,\n      attrs: [\n        { width: '70' }\n      ]\n    });\n\n    var todoCheckboxEl = markup.create({\n      tag: 'span',\n      className: 'glyphicon glyphicon-' + (todo.checked ? 'check' : 'unchecked'),\n      parent: todoCellCheckboxEl\n    });\n\n    var todoActionEditEl = markup.create({\n      tag: 'button',\n      attrs: [\n        { type: 'button' }\n      ],\n      className: 'btn btn-info btn-xs',\n      content: '<span class=\"glyphicon glyphicon-pencil\"></span>',\n      parent: todoCellActionsEl\n    });\n\n    var todoActionDeleteEl = markup.create({\n      tag: 'button',\n      attrs: [\n        { type: 'button' }\n      ],\n      className: 'btn btn-danger btn-xs',\n      content: '<span class=\"glyphicon glyphicon-remove\"></span>',\n      parent: todoCellActionsEl\n    });\n\n    events.on(todoCellCheckboxEl, 'click', function(event) {\n      event.preventDefault();\n      self.doCheck(todoEl, todoCheckboxEl, todoCellTextEl, todos, todo, index);\n    });\n\n    events.on(todoCellTextEl, 'click', function(event) {\n      event.preventDefault();\n      self.doCheck(todoEl, todoCheckboxEl, todoCellTextEl, todos, todo, index);\n    });\n\n    events.on(todoActionDeleteEl, 'click', function(event) {\n      self.delete(index, todos);\n    });\n\n    events.on(todoActionEditEl, 'click', function(event) {\n      events.send('edit-todo-item', {\n        todo: todo,\n        index: index\n      });\n    });\n  });\n};\n\nListTodos.prototype.doCheck = function(\n  todoEl,\n  todoCheckboxEl,\n  todoCellTextEl,\n  todos,\n  todo,\n  index\n) {\n  var isChecked = todoCheckboxEl.className === 'glyphicon glyphicon-check'\n\n  if (isChecked) {\n    todoEl.className = '';\n    todoCheckboxEl.className = 'glyphicon glyphicon-unchecked';\n    todoCellTextEl.className = '';\n    todo.checked = false;\n  } else {\n    todoEl.className = 'success';\n    todoCheckboxEl.className = 'glyphicon glyphicon-check';\n    todoCellTextEl.className = 'checked';\n    todo.checked = true;\n  }\n\n  todos[index] = todo;\n  data.update('todos', JSON.stringify(todos));\n  events.send('get-todos-list');\n};\n\nListTodos.prototype.delete = function(index, todos) {\n  todos.splice(index, 1);\n  data.update('todos', JSON.stringify(todos));\n  events.send('get-todos-list');\n};\n\nvar listTodos = new ListTodos();\n\n\nfunction App() {\n  window.parent.postMessage('FRAME_LOADED', (new URL(document.location.href)).searchParams.get('host_url') || 'http://jsmeasure.surge.sh');\n  // var todos = data.read('todos');\n  var todos = [];\n\n  for (var i = 0; i < 1000; i++) {\n    todos.push({\n      text: 'Test',\n      checked: false\n    });\n  }\n\n  data.update('todos', JSON.stringify(todos));\n\n  listTodos.getList();\n\n}\n\n// native\n// jquery\n// backbone\n// angular\n\nvar app = new App();\n"]}